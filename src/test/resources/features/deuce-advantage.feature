# language: zh-TW
功能: 平分和優勢計分邏輯
  作為一個網球比賽管理員
  我想要能夠正確處理平分和優勢狀況
  以便準確記錄複雜的計分情況

  背景:
    假設 我創建了一場比賽，球員為 "張三" 對戰 "李四"
    而且 比賽已經開始

  場景: 達到平分狀態
    假設 "張三" 已經得到 3 分，分數是 "40"
    而且 "李四" 得到 3 分，分數是 "40"
    那麼 比賽狀態應該是 "平分"
    而且 兩位球員的分數都顯示為 "40"

  場景: 從平分到優勢
    假設 比賽狀態是 "平分"
    當 "張三" 得到 1 分
    那麼 "張三" 應該獲得 "優勢"
    而且 "張三" 的分數應該顯示為 "優勢"
    而且 "李四" 的分數應該顯示為 "40"

  場景: 從優勢贏得一局
    假設 "張三" 處於 "優勢" 狀態
    當 "張三" 再得到 1 分
    那麼 "張三" 應該贏得這一局
    而且 "張三" 的局數應該增加 1
    而且 新的一局應該開始

  場景: 從優勢回到平分
    假設 "張三" 處於 "優勢" 狀態
    當 "李四" 得到 1 分
    那麼 比賽狀態應該回到 "平分"
    而且 兩位球員的分數都顯示為 "40"

  場景: 多次平分和優勢轉換
    假設 比賽狀態是 "平分"
    當 "張三" 得到 1 分
    那麼 "張三" 應該獲得 "優勢"
    當 "李四" 得到 1 分
    那麼 比賽狀態應該回到 "平分"
    當 "李四" 再得到 1 分
    那麼 "李四" 應該獲得 "優勢"
    當 "張三" 得到 1 分
    那麼 比賽狀態應該再次回到 "平分"

  場景: 從平分直接贏得一局
    假設 比賽狀態是 "平分"
    當 "李四" 得到 1 分
    而且 "李四" 再得到 1 分
    那麼 "李四" 應該贏得這一局
    而且 "李四" 的局數應該增加 1

  場景: 長時間的平分對戰
    假設 比賽狀態是 "平分"
    當 發生以下得分序列:
      | 球員 | 預期狀態 |
      | 張三 | 張三優勢 |
      | 李四 | 平分     |
      | 李四 | 李四優勢 |
      | 張三 | 平分     |
      | 張三 | 張三優勢 |
      | 李四 | 平分     |
      | 李四 | 李四優勢 |
      | 李四 | 李四贏局 |
    那麼 "李四" 應該贏得這一局
    而且 "李四" 的局數應該是 1

  場景: 平分狀態的分數顯示
    假設 比賽狀態是 "平分"
    當 我查詢目前分數
    那麼 分數應該顯示為 "40-40 (平分)"

  場景: 優勢狀態的分數顯示
    假設 "張三" 處於 "優勢" 狀態
    當 我查詢目前分數
    那麼 分數應該顯示為 "優勢-40"

  場景: 從非平分狀態無法直接進入優勢
    假設 "張三" 的分數是 "30"
    而且 "李四" 的分數是 "40"
    當 "張三" 得到 1 分
    那麼 比賽狀態應該是 "平分"
    而且 不應該是 "優勢" 狀態